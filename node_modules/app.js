const nodemailer = require('nodemailer');

// Konfigurasi transporter untuk SMTP
const transporter = nodemailer.createTransport({
  service: 'gmail', // Ganti sesuai dengan layanan email yang digunakan
  auth: {
    user: 'agussuga403@gmail.com', // Ganti dengan email Anda
    pass: 'lyhb supr tdqx qdog' // Ganti dengan password aplikasi atau password email Anda
  }
});

// Fungsi untuk mengirim email secara massal
const sendBulkEmail = async (recipients, subject, message) => {
  for (let recipient of recipients) {
    let mailOptions = {
      from: 'agussuga403@gmmail.com', // Ganti dengan email Anda
      to: recipient,
      subject: subject,
      text: message
    };

    try {
      await transporter.sendMail(mailOptions);
      console.log(`Email terkirim ke: ${recipient}`);
    } catch (error) {
      console.log(`Gagal mengirim ke ${recipient}: `, error);
    }
  }
};

// Daftar penerima, subjek, dan pesan
const recipients = ['bassram71@gmail.com']; // Masukkan daftar email penerima
const subject = 'test send bulk';
const message = 'tes ';

// Panggil fungsi untuk mengirim email
sendBulkEmail(recipients, subject, message);
